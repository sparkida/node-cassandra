<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: ModelInstance</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: ModelInstance</h1>

    




<section>

<header>
    
        <h2>
            <span class="ancestors"><a href="Cassandra.html">Cassandra</a><a href="Cassandra.Model.html">.Model</a>.</span>ModelInstance</h2>
        
            <div class="class-description">Creates a new ModelInstance object based on your model's schema, this
class extends the model.Factory class object, which is what's returned
everytime you instantiate a new Model(ColumnFamily)</div>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    
    <h2>Constructor</h2>
    

    <h4 class="name" id="ModelInstance"><span class="type-signature"></span>new ModelInstance<span class="signature">(dataObject, model)</span><span class="type-signature"></span></h4>

    











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>dataObject</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">an object containing column:values that will initialize the instance</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>model</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">the model this instance is based off of</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="model-instance.js.html">model-instance.js</a>, <a href="model-instance.js.html#line18">line 18</a>
    </li></ul></dd>
    

    

    

    
</dl>
















    
    </div>

    

    

    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="_prepareObject"><span class="type-signature"></span>_prepareObject<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    This is called at instantiation of each new ModelInstance
and will store the qualified data in a secret place.
This data store and the instance's enumerable properties(columns)
is updated on MOST successful actions except for when deleting
the entire object from the table, then the data is left intact.
<a href="Cassandra.Model.ModelInstance.html#restore">restore()</a> will restore the instances
column values to the values in the data store;
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="model-instance.js.html">model-instance.js</a>, <a href="model-instance.js.html#line56">line 56</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="delete"><span class="type-signature"></span>delete<span class="signature">(projection, callback)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Delete columns or entire rows from a model instance. When deleting
a projection of columns, the projected columns will be set to null
on the instance and the data store. This is essentially the same as
setting values to null and using save.
Currently, this method doesn't support using timestamps but it will soon
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>projection</code></td>
            

            <td class="type">
            
                
<span class="param-type">array</span>


            
            </td>

            

            

            <td class="description last">an array of columns to delete [optional]</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last">receives err</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="model-instance.js.html">model-instance.js</a>, <a href="model-instance.js.html#line204">line 204</a>
    </li></ul></dd>
    

    

    

    
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
        <ul>
            <li>support @usingTimestamp/delete options</li>
        </ul>
    </dd>
    
</dl>
















        
            

    

    <h4 class="name" id="restore"><span class="type-signature"></span>restore<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Instanced Models have the ability to rollback failed
writes, for example, if you attempt to "model.save(...)"
and this produces an errror, in your callback you can
then determine if you wish to restore the object data
model back to the values it has saved from the last sync
with your database or continue on with the local data
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="model-instance.js.html">model-instance.js</a>, <a href="model-instance.js.html#line122">line 122</a>
    </li></ul></dd>
    

    

    

    
</dl>















    <h5>Example</h5>
    
        <p class="code-caption">Restore last data synced</p>
    
    <pre class="prettyprint"><code>//user schema: { name: 'text' }, { primaryKeys: [ 'name' ] }
user = new TestModel({name: 'foo'});
//we should not be able to update a primary key
user.name = 'bar';
user.save((err) => {
  if (err) {
    //user.name == 'bar'
    user.restore();
    //user.name == 'foo'
  }
});</code></pre>



        
            

    

    <h4 class="name" id="save"><span class="type-signature"></span>save<span class="signature">(callback)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Save values altered since instantiation
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last">receives err</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="model-instance.js.html">model-instance.js</a>, <a href="model-instance.js.html#line162">line 162</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="sync"><span class="type-signature"></span>sync<span class="signature">(callback)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Save the current instance's data model to the table
this will create a new row if you have altered a primary key
or are saving an object for the first time with <a href="Cassandra.Model.ModelInstance.html#save">save()</a>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>callback</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last">receives err</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="model-instance.js.html">model-instance.js</a>, <a href="model-instance.js.html#line136">line 136</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BaseModel.html">BaseModel</a></li><li><a href="Cassandra.html">Cassandra</a></li><li><a href="Cassandra.Model.html">Model</a></li><li><a href="Cassandra.Model.ColumnFamily.html">ColumnFamily</a></li><li><a href="Cassandra.Model.MaterializedView.html">MaterializedView</a></li><li><a href="Cassandra.Model.ModelInstance.html">ModelInstance</a></li><li><a href="Cassandra.Schema.html">Schema</a></li></ul><h3>Mixins</h3><ul><li><a href="AbstractModel.html">AbstractModel</a></li></ul><h3>Global</h3><ul><li><a href="global.html#ConnectionOptions">ConnectionOptions</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Mon Mar 14 2016 21:27:21 GMT+0000 (UTC)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>